import{c as ee,a as t,f,t as d}from"../chunks/CeFSxQbd.js";import{p as me,f as p,a as he,c as w,C as Me,r as k,ag as et,g as e,s as P,t as C,b as Z,e as Kt,$ as Rt,d as s,n as v,h as Re}from"../chunks/BRtkYQ1n.js";import{d as zt,s as U}from"../chunks/E6HBHZWA.js";import{p as oe,i as V,r as ke,c as o}from"../chunks/B9s1PaqY.js";import{c as $e,d as ge,h as Wt,q as Gt,e as tt,a as rt,i as at}from"../chunks/Dccx3I4d.js";import{a as qe,s as Jt}from"../chunks/C7_CdJMd.js";import{s as Qt,a as Xt}from"../chunks/CIQlyMqn.js";import{g as st}from"../chunks/D6cHjFh5.js";import{p as Yt}from"../chunks/D_qSOFyK.js";import{a as we}from"../chunks/BsOpdwLl.js";import{d as Zt,e as pt,S as mt,a as ht,b as le,c as xt}from"../chunks/B6rEL-Bb.js";import{b as pe}from"../chunks/OA9xLScD.js";import{K as er}from"../chunks/BDzdpMwB.js";var tr=f("<input/>"),rr=f("<input/>");function ar(N,a){me(a,!0);let _=oe(a,"ref",15,null),I=oe(a,"value",15),l=oe(a,"files",15),n=oe(a,"data-slot",3,"input"),i=ke(a,["$$slots","$$events","$$legacy","ref","value","type","files","class","data-slot"]);var D=ee(),Be=p(D);{var ve=O=>{var b=tr();$e(b,L=>({"data-slot":n(),class:L,type:"file",...i}),[()=>ge("selection:bg-primary dark:bg-input/30 selection:text-primary-foreground border-input ring-offset-background placeholder:text-muted-foreground flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 pt-1.5 text-sm font-medium shadow-xs transition-[color,box-shadow] outline-none disabled:cursor-not-allowed disabled:opacity-50","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a.class)],void 0,void 0,void 0,!0),pe(b,L=>_(L),()=>_()),Zt(b,l),pt(b,I),t(O,b)},A=O=>{var b=rr();$e(b,L=>({"data-slot":n(),class:L,type:a.type,...i}),[()=>ge("border-input bg-background selection:bg-primary dark:bg-input/30 selection:text-primary-foreground ring-offset-background placeholder:text-muted-foreground flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a.class)],void 0,void 0,void 0,!0),pe(b,L=>_(L),()=>_()),pt(b,I),t(O,b)};V(Be,O=>{a.type==="file"?O(ve):O(A,!1)})}t(N,D),he()}var sr=f('<div data-slot="table-container" class="relative w-full overflow-x-auto"><table><!></table></div>');function lr(N,a){me(a,!0);let _=oe(a,"ref",15,null),I=ke(a,["$$slots","$$events","$$legacy","ref","class","children"]);var l=sr(),n=w(l);$e(n,D=>({"data-slot":"table",class:D,...I}),[()=>ge("w-full caption-bottom text-sm",a.class)]);var i=w(n);qe(i,()=>a.children??Me),k(n),pe(n,D=>_(D),()=>_()),k(l),t(N,l),he()}var or=f("<tbody><!></tbody>");function nr(N,a){me(a,!0);let _=oe(a,"ref",15,null),I=ke(a,["$$slots","$$events","$$legacy","ref","class","children"]);var l=or();$e(l,i=>({"data-slot":"table-body",class:i,...I}),[()=>ge("[&_tr:last-child]:border-0",a.class)]);var n=w(l);qe(n,()=>a.children??Me),k(l),pe(l,i=>_(i),()=>_()),t(N,l),he()}var ir=f("<td><!></td>");function Oe(N,a){me(a,!0);let _=oe(a,"ref",15,null),I=ke(a,["$$slots","$$events","$$legacy","ref","class","children"]);var l=ir();$e(l,i=>({"data-slot":"table-cell",class:i,...I}),[()=>ge("bg-clip-padding p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pe-0",a.class)]);var n=w(l);qe(n,()=>a.children??Me),k(l),pe(l,i=>_(i),()=>_()),t(N,l),he()}var dr=f("<th><!></th>");function Le(N,a){me(a,!0);let _=oe(a,"ref",15,null),I=ke(a,["$$slots","$$events","$$legacy","ref","class","children"]);var l=dr();$e(l,i=>({"data-slot":"table-head",class:i,...I}),[()=>ge("text-foreground h-10 bg-clip-padding px-2 text-start align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pe-0",a.class)]);var n=w(l);qe(n,()=>a.children??Me),k(l),pe(l,i=>_(i),()=>_()),t(N,l),he()}var cr=f("<thead><!></thead>");function ur(N,a){me(a,!0);let _=oe(a,"ref",15,null),I=ke(a,["$$slots","$$events","$$legacy","ref","class","children"]);var l=cr();$e(l,i=>({"data-slot":"table-header",class:i,...I}),[()=>ge("[&_tr]:border-b",a.class)]);var n=w(l);qe(n,()=>a.children??Me),k(l),pe(l,i=>_(i),()=>_()),t(N,l),he()}var vr=f("<tr><!></tr>");function bt(N,a){me(a,!0);let _=oe(a,"ref",15,null),I=ke(a,["$$slots","$$events","$$legacy","ref","class","children"]);var l=vr();$e(l,i=>({"data-slot":"table-row",class:i,...I}),[()=>ge("hover:[&,&>svelte-css-wrapper]:[&>th,td]:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a.class)]);var n=w(l);qe(n,()=>a.children??Me),k(l),pe(l,i=>_(i),()=>_()),t(N,l),he()}var fr=f("<!> <!> <!> <!> <!>",1),_r=f("<!> <!>",1),$r=f("<!> <!> <!> <!> <!>",1),gr=f("<!> <!>",1),pr=f(' <button type="button" class="ml-1 hover:text-destructive">×</button>',1),mr=f(' <button type="button" class="ml-1 hover:text-destructive">×</button>',1),hr=f(' <button type="button" class="ml-1 hover:text-destructive">×</button>',1),xr=f('<div class="text-center py-12 text-destructive"> </div>'),br=f("<!> <!> <!> <!> <!> <!>",1),Pr=f('<a class="text-primary hover:underline text-sm"> </a>'),yr=f("<!> <!>",1),wr=f('<div class="flex items-center gap-2 flex-wrap"><!> <!> <!> <span class="truncate"> </span></div>'),kr=f('<span class="text-xs text-muted-foreground"> </span>'),Sr=f('<span class="inline-flex items-center justify-center"><span></span></span>'),Tr=f("<!> <!> <!> <!> <!> <!>",1),Cr=f("<!> <!>",1),Dr=f('<div class="mb-4 text-muted-foreground"> </div> <!>',1),Ur=f('<div class="container mx-auto px-4 py-8"><div class="mb-6"><h1 class="text-3xl font-bold">ALM Defects</h1> <p class="text-xs text-muted-foreground font-mono mt-1 h-4"> </p></div> <div class="mb-6 flex flex-wrap gap-4 items-end"><div class="flex-1 min-w-48"><!></div> <!> <!> <!> <!> <!></div> <!></div> <!>',1);function Kr(N,a){me(a,!0);const _=()=>Xt(Yt,"$page",I),[I,l]=Qt();let n=Z(null),i=Z(null),D=Z(-1),Be=Z(null);const ve=Re(()=>new URLSearchParams(_().url.search));let A=Z("!terminal"),O=Z(""),b=Z(""),L=Z(""),fe=Z(""),xe=Z(""),lt=Z(!1);et(()=>{e(lt)||(P(A,e(ve).get("status")||"!terminal",!0),P(O,e(ve).get("priority")||"",!0),P(b,e(ve).get("owner")||"",!0),P(L,e(ve).get("workstream")||"",!0),P(fe,e(ve).get("defect_type")||"",!0),P(xe,e(ve).get("q")||"",!0),P(lt,!0))});async function ze(){P(i,null);try{const r={limit:5e3};e(A)&&(r.status=e(A)),e(O)&&(r.priority=e(O)),e(b)&&(r.owner=e(b)),e(L)&&(r.workstream=e(L)),e(fe)&&(r.defect_type=e(fe)),e(xe)&&(r.q=e(xe)),P(n,await Gt(r),!0)}catch(r){P(i,r instanceof Error?r.message:"Unknown error",!0)}}function ot(){const r=new URLSearchParams;e(A)&&e(A)!=="!terminal"&&r.set("status",e(A)),e(O)&&r.set("priority",e(O)),e(b)&&r.set("owner",e(b)),e(L)&&r.set("workstream",e(L)),e(fe)&&r.set("defect_type",e(fe)),e(xe)&&r.set("q",e(xe));const S=r.toString()?`?${r}`:"/";st(S,{replaceState:!0,keepFocus:!0})}let We=null;function Pt(){We&&clearTimeout(We),We=setTimeout(ot,300)}function Ne(){ot(),ze()}function yt(){Pt(),ze()}function wt(r){return r?new Date(r).toISOString().slice(0,10):"-"}function kt(r){return r?r.includes("_")?r.split("_")[0]:r:"-"}function St(r){return r?r.includes("1")?{color:"bg-red-500",label:"P1"}:r.includes("2")?{color:"bg-orange-500",label:"P2"}:r.includes("3")?{color:"bg-yellow-500",label:"P3"}:r.includes("4")?{color:"bg-green-500",label:"P4"}:{color:"bg-muted",label:"-"}:{color:"bg-muted",label:"-"}}function Tt(){e(n)&&e(n).defects.length>0&&(P(D,Math.min(e(D)+1,e(n).defects.length-1),!0),nt())}function Ct(){e(n)&&e(n).defects.length>0&&(P(D,Math.max(e(D)-1,0),!0),nt())}function Dt(){e(n)&&e(D)>=0&&e(D)<e(n).defects.length&&st(`/defects/${e(n).defects[e(D)].id}`)}function nt(){document.querySelector(`[data-index="${e(D)}"]`)?.scrollIntoView({block:"nearest",behavior:"smooth"})}et(()=>{e(n)&&P(D,e(n).defects.length>0?0:-1,!0)}),et(()=>{ze()});var it=Ur();Wt("1uha8ag",r=>{Kt(()=>{Rt.title="ALM Defects"})});var Ge=p(it),Je=w(Ge),dt=s(w(Je),2),Ut=w(dt,!0);k(dt),k(Je);var Qe=s(Je,2),Xe=w(Qe),It=w(Xe);ar(It,{type:"text",oninput:yt,placeholder:"Search defects...",get value(){return e(xe)},set value(r){P(xe,r,!0)},get ref(){return e(Be)},set ref(r){P(Be,r,!0)}}),k(Xe);var ct=s(Xe,2);o(ct,()=>xt,(r,S)=>{S(r,{type:"single",onValueChange:Ne,get value(){return e(A)},set value(j){P(A,j,!0)},children:(j,z)=>{var T=_r(),E=p(T);o(E,()=>mt,(ie,de)=>{de(ie,{class:"w-44",children:(ce,Ve)=>{var K=ee(),te=p(K);{var re=F=>{var W=d("Active");t(F,W)},ae=F=>{var W=ee(),$=p(W);{var g=h=>{var c=d("Closed");t(h,c)},m=h=>{var c=ee(),je=p(c);{var u=se=>{var ue=d("Open Only");t(se,ue)},Se=se=>{var ue=ee(),Te=p(ue);{var Ce=G=>{var _e=d("Blocked");t(G,_e)},De=G=>{var _e=ee(),Ue=p(_e);{var M=x=>{var R=d("All Status");t(x,R)},q=x=>{var R=d();C(()=>U(R,e(A))),t(x,R)};V(Ue,x=>{e(A)===""?x(M):x(q,!1)},!0)}t(G,_e)};V(Te,G=>{e(A)==="blocked"?G(Ce):G(De,!1)},!0)}t(se,ue)};V(je,se=>{e(A)==="open"?se(u):se(Se,!1)},!0)}t(h,c)};V($,h=>{e(A)==="closed"?h(g):h(m,!1)},!0)}t(F,W)};V(te,F=>{e(A)==="!terminal"?F(re):F(ae,!1)})}t(ce,K)},$$slots:{default:!0}})});var ne=s(E,2);o(ne,()=>ht,(ie,de)=>{de(ie,{children:(ce,Ve)=>{var K=fr(),te=p(K);o(te,()=>le,($,g)=>{g($,{value:"",children:(m,h)=>{v();var c=d("All Status");t(m,c)},$$slots:{default:!0}})});var re=s(te,2);o(re,()=>le,($,g)=>{g($,{value:"!terminal",children:(m,h)=>{v();var c=d("Active");t(m,c)},$$slots:{default:!0}})});var ae=s(re,2);o(ae,()=>le,($,g)=>{g($,{value:"open",children:(m,h)=>{v();var c=d("Open Only");t(m,c)},$$slots:{default:!0}})});var F=s(ae,2);o(F,()=>le,($,g)=>{g($,{value:"blocked",children:(m,h)=>{v();var c=d("Blocked");t(m,c)},$$slots:{default:!0}})});var W=s(F,2);o(W,()=>le,($,g)=>{g($,{value:"closed",children:(m,h)=>{v();var c=d("Closed");t(m,c)},$$slots:{default:!0}})}),t(ce,K)},$$slots:{default:!0}})}),t(j,T)},$$slots:{default:!0}})});var ut=s(ct,2);o(ut,()=>xt,(r,S)=>{S(r,{type:"single",onValueChange:Ne,get value(){return e(O)},set value(j){P(O,j,!0)},children:(j,z)=>{var T=gr(),E=p(T);o(E,()=>mt,(ie,de)=>{de(ie,{class:"w-40",children:(ce,Ve)=>{v();var K=d();C(te=>U(K,te),[()=>e(O)?e(O).split("-")[0]:"All Priority"]),t(ce,K)},$$slots:{default:!0}})});var ne=s(E,2);o(ne,()=>ht,(ie,de)=>{de(ie,{children:(ce,Ve)=>{var K=$r(),te=p(K);o(te,()=>le,($,g)=>{g($,{value:"",children:(m,h)=>{v();var c=d("All Priority");t(m,c)},$$slots:{default:!0}})});var re=s(te,2);o(re,()=>le,($,g)=>{g($,{value:"P1-Critical",children:(m,h)=>{v();var c=d("P1 - Critical");t(m,c)},$$slots:{default:!0}})});var ae=s(re,2);o(ae,()=>le,($,g)=>{g($,{value:"P2-High",children:(m,h)=>{v();var c=d("P2 - High");t(m,c)},$$slots:{default:!0}})});var F=s(ae,2);o(F,()=>le,($,g)=>{g($,{value:"P3-Medium",children:(m,h)=>{v();var c=d("P3 - Medium");t(m,c)},$$slots:{default:!0}})});var W=s(F,2);o(W,()=>le,($,g)=>{g($,{value:"P4-Low",children:(m,h)=>{v();var c=d("P4 - Low");t(m,c)},$$slots:{default:!0}})}),t(ce,K)},$$slots:{default:!0}})}),t(j,T)},$$slots:{default:!0}})});var vt=s(ut,2);{var At=r=>{we(r,{variant:"secondary",class:"flex items-center gap-1 px-3 py-1.5",children:(S,j)=>{v();var z=pr(),T=p(z),E=s(T);E.__click=()=>{P(b,""),Ne()},C(ne=>U(T,`Owner: ${ne??""} `),[()=>e(b).includes("convergint")?"Convergint":e(b).replace(/_/g," ")]),t(S,z)},$$slots:{default:!0}})};V(vt,r=>{e(b)&&r(At)})}var ft=s(vt,2);{var Ot=r=>{we(r,{variant:"secondary",class:"flex items-center gap-1 px-3 py-1.5",children:(S,j)=>{v();var z=mr(),T=p(z),E=s(T);E.__click=()=>{P(L,""),Ne()},C(()=>U(T,`Workstream: ${e(L)??""} `)),t(S,z)},$$slots:{default:!0}})};V(ft,r=>{e(L)&&r(Ot)})}var Lt=s(ft,2);{var Mt=r=>{we(r,{variant:"secondary",class:"flex items-center gap-1 px-3 py-1.5",children:(S,j)=>{v();var z=hr(),T=p(z),E=s(T);E.__click=()=>{P(fe,""),Ne()},C(()=>U(T,`Type: ${e(fe)??""} `)),t(S,z)},$$slots:{default:!0}})};V(Lt,r=>{e(fe)&&r(Mt)})}k(Qe);var qt=s(Qe,2);{var Bt=r=>{var S=xr(),j=w(S,!0);k(S),C(()=>U(j,e(i))),t(r,S)},Nt=r=>{var S=ee(),j=p(S);{var z=T=>{var E=Dr(),ne=p(E),ie=w(ne);k(ne);var de=s(ne,2);o(de,()=>lr,(ce,Ve)=>{Ve(ce,{children:(K,te)=>{var re=Cr(),ae=p(re);o(ae,()=>ur,(W,$)=>{$(W,{children:(g,m)=>{var h=ee(),c=p(h);o(c,()=>bt,(je,u)=>{u(je,{children:(Se,se)=>{var ue=br(),Te=p(ue);o(Te,()=>Le,(M,q)=>{q(M,{class:"w-16",children:(x,R)=>{v();var H=d("ID");t(x,H)},$$slots:{default:!0}})});var Ce=s(Te,2);o(Ce,()=>Le,(M,q)=>{q(M,{children:(x,R)=>{v();var H=d("Name");t(x,H)},$$slots:{default:!0}})});var De=s(Ce,2);o(De,()=>Le,(M,q)=>{q(M,{class:"w-28",children:(x,R)=>{v();var H=d("Status");t(x,H)},$$slots:{default:!0}})});var G=s(De,2);o(G,()=>Le,(M,q)=>{q(M,{class:"w-12 text-center",children:(x,R)=>{v();var H=d("Pri");t(x,H)},$$slots:{default:!0}})});var _e=s(G,2);o(_e,()=>Le,(M,q)=>{q(M,{class:"w-24",children:(x,R)=>{v();var H=d("Owner");t(x,H)},$$slots:{default:!0}})});var Ue=s(_e,2);o(Ue,()=>Le,(M,q)=>{q(M,{class:"w-24",children:(x,R)=>{v();var H=d("Created");t(x,H)},$$slots:{default:!0}})}),t(Se,ue)},$$slots:{default:!0}})}),t(g,h)},$$slots:{default:!0}})});var F=s(ae,2);o(F,()=>nr,(W,$)=>{$(W,{children:(g,m)=>{var h=ee(),c=p(h);tt(c,17,()=>e(n).defects,at,(je,u,Se)=>{var se=ee(),ue=p(se);{let Te=Re(()=>Se===e(D)?"bg-muted":"");o(ue,()=>bt,(Ce,De)=>{De(Ce,{get class(){return`cursor-pointer ${e(Te)??""}`},"data-index":Se,onclick:()=>st(`/defects/${e(u).id}`),children:(G,_e)=>{var Ue=Tr(),M=p(Ue);o(M,()=>Oe,(J,Q)=>{Q(J,{children:(X,Ie)=>{var y=Pr();y.__click=be=>be.stopPropagation();var B=w(y);k(y),C(()=>{rt(y,"href",`/defects/${e(u).id??""}`),U(B,`#${e(u).id??""}`)}),t(X,y)},$$slots:{default:!0}})});var q=s(M,2);o(q,()=>Oe,(J,Q)=>{Q(J,{class:"max-w-lg",children:(X,Ie)=>{var y=wr(),B=w(y);{var be=Y=>{we(Y,{variant:"destructive",class:"text-xs px-1.5 py-0",children:(Pe,Ee)=>{v();var Ae=d();C(Fe=>U(Ae,`Blocks ${Fe??""}`),[()=>e(u).blocks.join(", ")]),t(Pe,Ae)},$$slots:{default:!0}})};V(B,Y=>{e(u).blocks&&e(u).blocks.length>0&&Y(be)})}var _t=s(B,2);{var Et=Y=>{var Pe=yr(),Ee=p(Pe);tt(Ee,17,()=>e(u).scenarios.slice(0,3),at,(ye,Ke)=>{we(ye,{variant:"secondary",class:"text-xs px-1.5 py-0",children:(He,Ze)=>{v();var gt=d();C(()=>U(gt,e(Ke))),t(He,gt)},$$slots:{default:!0}})});var Ae=s(Ee,2);{var Fe=ye=>{we(ye,{variant:"outline",class:"text-xs px-1.5 py-0",children:(Ke,He)=>{v();var Ze=d();C(()=>U(Ze,`+${e(u).scenarios.length-3}`)),t(Ke,Ze)},$$slots:{default:!0}})};V(Ae,ye=>{e(u).scenarios.length>3&&ye(Fe)})}t(Y,Pe)};V(_t,Y=>{e(u).scenarios&&e(u).scenarios.length>0&&Y(Et)})}var $t=s(_t,2);{var Ft=Y=>{var Pe=ee(),Ee=p(Pe);tt(Ee,17,()=>e(u).integrations.slice(0,2),at,(Ae,Fe)=>{we(Ae,{variant:"outline",class:"text-xs px-1.5 py-0 text-blue-400",children:(ye,Ke)=>{v();var He=d();C(()=>U(He,e(Fe))),t(ye,He)},$$slots:{default:!0}})}),t(Y,Pe)};V($t,Y=>{e(u).integrations&&e(u).integrations.length>0&&Y(Ft)})}var Ye=s($t,2),Ht=w(Ye,!0);k(Ye),k(y),C(()=>{rt(Ye,"title",e(u).name),U(Ht,e(u).clean_name||e(u).name)}),t(X,y)},$$slots:{default:!0}})});var x=s(q,2);o(x,()=>Oe,(J,Q)=>{Q(J,{children:(X,Ie)=>{var y=kr(),B=w(y,!0);k(y),C(()=>U(B,e(u).status||"-")),t(X,y)},$$slots:{default:!0}})});var R=s(x,2);o(R,()=>Oe,(J,Q)=>{Q(J,{class:"text-center",children:(X,Ie)=>{const y=Re(()=>St(e(u).priority));var B=Sr(),be=w(B);k(B),C(()=>{rt(B,"title",e(u).priority||"No priority"),Jt(be,1,`w-2.5 h-2.5 rounded-full ${e(y).color??""}`)}),t(X,B)},$$slots:{default:!0}})});var H=s(R,2);{let J=Re(()=>e(u).owner||"");o(H,()=>Oe,(Q,X)=>{X(Q,{class:"truncate",get title(){return e(J)},children:(Ie,y)=>{v();var B=d();C(be=>U(B,be),[()=>kt(e(u).owner)]),t(Ie,B)},$$slots:{default:!0}})})}var jt=s(H,2);o(jt,()=>Oe,(J,Q)=>{Q(J,{class:"text-muted-foreground",children:(X,Ie)=>{v();var y=d();C(B=>U(y,B),[()=>wt(e(u).created)]),t(X,y)},$$slots:{default:!0}})}),t(G,Ue)},$$slots:{default:!0}})})}t(je,se)}),t(g,h)},$$slots:{default:!0}})}),t(K,re)},$$slots:{default:!0}})}),C(()=>U(ie,`${e(n).defects.length??""} defects`)),t(T,E)};V(j,T=>{e(n)&&T(z)},!0)}t(r,S)};V(qt,r=>{e(i)?r(Bt):r(Nt,!1)})}k(Ge);var Vt=s(Ge,2);er(Vt,{onNavigateDown:Tt,onNavigateUp:Ct,onSelect:Dt,get searchInput(){return e(Be)}}),C(()=>U(Ut,_().url.search||"")),t(N,it),he(),l()}zt(["click"]);export{Kr as component};
